# Digital Harvest - Accounting-Based Business Simulator

## Project Objective

Perfect Books begins as version Digital Harvest 2.0. Its likely to become the bones of the next version of Digital Harvest.

This project will become a personal financial management and tracking system for myself until i can make it public for other users.

This is open source and you can download it yourself and run it locally right now.


## Table of Contents
- [Core Features](#core-features)
- [Tech Stack](#tech-stack)
- [Dashboard & Analysis](#dashboard--analysis)
- [Setup Instructions](#setup-instructions)
- [Database Schema](#database-schema)

## Core Features

### Simulation Engine

* **Double-Entry Accounting:** Every transaction generates corresponding entries in a financial ledger, accurately tracking assets, revenue, and costs according to standard accounting principles.
* **Perpetual Inventory System:** An inventory ledger tracks the quantity and value of stock in real-time as purchases and sales occur.
* **Dynamic Sales Modeling:** A sophisticated sales model that factors in long-term trends, seasonality, weekly cycles, and price sensitivity to generate realistic demand.
* **Multi-Vendor Supply Chain:** Source products from different vendors with varying lead times, costs, and minimum order requirements.
* **Banking & Loan System:** Access business loans to fund growth, with realistic repayment terms and interest calculations.
* **Persistent State:** The simulation's state (cash on hand, current date) is persisted in the database, allowing it to be stopped and restarted seamlessly.

### User Interfaces & Analysis
* **Enhanced Web UI (v2):** A comprehensive React-based dashboard with multiple pages for inventory management, supplier relationships, marketing campaigns, expense tracking, and financial analysis.
* **Real-time Debug Tools:** Built-in debugging panels to monitor sales activity, inventory changes, and system performance.
* **Terminal Application:** A classic command-line interface provides an alternative way to manage the business day-by-day.
* **BI-Ready Schema:** The normalized MySQL database is designed for direct connection with business intelligence tools like Power BI, enabling the creation of live, interactive dashboards.

## Tech Stack

* **Backend:** Python 3
* **Database:** MySQL
* **Frontend:** React with Tailwind CSS for styling.
* **Data Analysis:** Microsoft Power BI
* **Key Libraries:** `mysql-connector-python`, `flask`, `flask-cors`

![Python](https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=python&logoColor=white)
![MySQL](https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white)
![React](https://img.shields.io/badge/React-61DAFB?style=for-the-badge&logo=react&logoColor=black)
![Power BI](https://img.shields.io/badge/Power%20BI-F2C811?style=for-the-badge&logo=powerbi&logoColor=black)
![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white)


## Dashboard & Analysis

The data generated by the simulation is visualized in a multi-page Power BI dashboard designed to provide a comprehensive business overview. The web UI provides direct operational control over the business.

### Web Interface v2 (Interactive Dashboard)

![Business UI Demo](screenshots/Business_UI.gif)

*The enhanced v2 web interface featuring real-time inventory management, supplier relationships, marketing campaigns, and financial tracking.*

### Power BI Analytics
These dashboards are currently in the logic prototyping stage. They will be formatted and finalized as the project nears completion.

## 1. The Executive Summary Dashboard


![Sales Tab](screenshots/summary9.21.25.jpg)
Objective: To provide a high-level, at-a-glance overview of the business's overall financial health and profitability. This dashboard is designed for strategic decision-making, answering the fundamental questions: "Are we profitable?" and "How is our financial position trending over time?"

* **Key Features & Insights**:
Headline KPIs: Four prominent cards display the most critical real-time metrics: Cash on Hand, Accounts Payable (AP) Due, Gross Profit, and Net Profit.

* **Monthly Profit & Loss**: A clustered column and line chart that tracks Total Revenue against Operating Expenses on a monthly basis. The integrated Net Profit line provides a clear visual trend of the company's bottom-line performance.

* **Operating Expense Breakdown**: An interactive donut chart that details the composition of the company's costs. It reveals the underlying structure of the operating expenses, highlighting major contributors like "Warehouse Rent" (78.69%).

* **Working Capital Trend**: A sophisticated combination chart that plots the company's liquid Cash Balance against its short-term liabilities (Historical AP Balance). This visual is key for analyzing liquidity and managing cash flow effectively.

* **Date Slicer**: A full-report slicer allows the user to dynamically filter the entire dashboard to analyze performance over specific time periods, from a single quarter to the entire life of the business.

## 2. The Supply Chain & Operations Dashboard


![Sales Tab](screenshots/supply&operations9.21.25.jpg)
Objective: To provide deep, actionable insights into the operational side of the business. This dashboard connects physical activities—like ordering from vendors and managing stock—to their direct financial impact, helping to optimize inventory and supplier relationships.

* **Key Features & Insights**:
Real-Time Validation KPIs: This dashboard includes cards for Total Debits and Total Credits. The centerpiece is an Accounting Equation card (Total Debits - Total Credits) that resolves to $0.00, providing a definitive, real-time validation of the simulation's double-entry accounting system integrity. A Company Equity card shows the business's true net worth.

* **Vendor Scorecard**: A detailed table that evaluates supplier performance based on Average Lead Time and On-Time Delivery %, allowing for data-driven decisions on which vendors to prioritize.

* **Live Stock Levels**: A table provides a real-time count of Quantity on Hand and Inventory Value for each product, serving as the central tool for making purchasing and stock management decisions.

* **Assets & Equity Chart**: A powerful stacked column and line chart that visualizes the accounting equation over time. The stacked columns show the composition of Total Assets (Cash + Inventory), while the integrated line shows the growth of Company Equity (Assets - Liabilities).

* **Interactive Slicers**: The entire report can be filtered by Vendor or product Category, enabling deep-dive analysis into the performance of specific product lines or the efficiency of individual suppliers.

## Setup Instructions

### Prerequisites

* Python 3
* A running MySQL server

### 1. Database Setup

1.  Ensure your MySQL server is running.
2.  Update the `DB_CONFIG` dictionary in `/src_v2/setup_v2.py`, `/src_v2/api_v2.py`, and '/srv_v2/engine_v2.py with your MySQL credentials (user, password, host, port).

### 2. Install Dependencies

Install the required Python package using the `requirements.txt` file:
```bash
pip install -r requirements.txt
```

### 3. Initialize the Database
Run the setup script **once** from your terminal. This will create the `digital_harvest` database, build the required tables, and populate the initial product catalog.
```bash
python src_v2/setup_v2.py
```

*Note: This script will completely drop and recreate the database each time it is run.*

### 4. Run the Simulation
You can run either the Web UI or the Terminal version.

**To use the Web UI v2 (Recommended):**
1. Start the backend API server:
   ```bash
   python src_v2/api_v2.py
   ```
2. Start the local web server (in a separate terminal):
   ```bash
   cd C:\FarmFiles
   python -m http.server 8080
   ```
   You should see: `Serving HTTP on 0.0.0.0 port 8080 (http://0.0.0.0:8080/) ...`
3. Open your web browser and navigate to:
   ```
   http://localhost:8080/index_v2.html
   ```

**To use the Terminal Application:**
```bash
python src_v2/cli_v2.py
```

**Note:** The web interfaces require both the API server (`api_v2.py`) and the local web server to be running simultaneously in separate terminal windows.

## Database Schema

| Table Name | Description |
| :--- | :--- |
| `products` & `categories` | Stores the product catalog, including metadata used by the sales simulation AI. |
| `inventory_ledger` | A perpetual log of all inventory movements. Each entry records the change in quantity, the value of the transaction, and the resulting quantity on hand. |
| `financial_ledger` | A classic double-entry accounting ledger. Every business event creates corresponding debit and credit entries, ensuring the accounting equation remains in balance. |

## Project Structure

```
digital-harvest/
├── src/              # Original implementation
├── src_v1/           # First new version
├── src_v2/           # Enhanced v2 implementation (recommended)
│   ├── engine_v2.py  # Core business simulation engine
│   ├── api_v2.py     # Flask REST API
│   ├── cli_v2.py     # Terminal interface
│   └── setup_v2.py   # Database initialization
├── index.html        # Simple working model
├── index_v1.html     # Basic web interface with expenses
├── index_v2.html     # Enhanced web interface with dashboard (recommended)
└── screenshots/      # Dashboard examples
```

## What's New in v2

* **Multi-page Web Interface:** Dedicated pages for Dashboard, Inventory, Suppliers, Marketing, Expenses, and Banking
* **Market Events:** Dynamic events that boost demand for specific product types
* **Progressive Unlocks:** Products unlock as your business reaches revenue milestones
* **Enhanced Vendor System:** Multiple suppliers with different terms, lead times, and relationships
* **Loan System:** Access business financing with realistic terms
* **Debug Tools:** Built-in debugging panels to monitor simulation activity
* **Improved Sales Model:** More sophisticated demand calculation with product-specific attributes
